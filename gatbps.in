#!/bin/sh
case "$#" in
  0)
    cat <<EOF >&2
gatbps: no command given
Try 'gatbps --help' for more information.
EOF
    exit 1
    ;;
esac
case "$1" in
  --help|--hel|--he|--h)
    cat <<EOF || exit 1
Usage: gatbps (--help | --version) [<ignored>...]
       gatbps [--] <command> [<argument>...]
EOF
    exit 0
    ;;
  --version|--versio|--versi|--vers|--ver|--ve|--v)
    cat <<EOF || exit 1
gatbps (GATBPS) @PACKAGE_VERSION@ (@PACKAGE_DATE@)
All copyright and related or neighboring rights waived.
See <https://creativecommons.org/publicdomain/zero/1.0/>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
EOF
    exit 0
    ;;
  --)
    shift
    ;;
  --help=*|--hel=*|--he=*|--h=*)
    cat <<EOF >&2
gatbps: option '--help' doesn't allow an argument
Try 'gatbps --help' for more information.
EOF
    exit 1
    ;;
  --version=*|--versio=*|--versi=*|--vers=*|--ver=*|--ve=*|--v=*)
    cat <<EOF >&2
gatbps: option '--version' doesn't allow an argument
Try 'gatbps --help' for more information.
EOF
    exit 1
    ;;
  --=*)
    cat <<EOF >&2
gatbps: option '$1' is ambiguous; possibilities: '--help' '--version'
Try 'gatbps --help' for more information.
EOF
    exit 1
    ;;
  --*)
    cat <<EOF >&2
gatbps: unrecognized option '$1'
Try 'gatbps --help' for more information.
EOF
    exit 1
    ;;
  -?*)
    cat <<EOF >&2
gatbps: unrecognized option(s) '$1'
Try 'gatbps --help' for more information.
EOF
    exit 1
    ;;
esac
trap 'rm -f DATE.tmp' EXIT
if git ls-files --error-unmatch DATE.sh >/dev/null 2>&1; then
  TZ=UTC git log -1 --date=local --pretty=%ad >DATE.tmp
  x=$(sed 's/... \(...\) \(.*\) ..:..:.. \(....\)/\3-\1-\2/
           s/Jan/01/; s/Feb/02/; s/Mar/03/; s/Apr/04/
           s/May/05/; s/Jun/06/; s/Jul/07/; s/Aug/08/
           s/Sep/09/; s/Oct/10/; s/Nov/11/; s/Dec/12/
           s/-\(.\)$/-0\1/' DATE.tmp)
  echo "$x" >DATE.tmp
  mv DATE.tmp DATE
  echo "$x"
elif test -f DATE; then
  cat DATE
else
  echo 'DATE.sh: not in repository and DATE not found' >&2
  exit 1
fi

#
# The authors of this file have waived all copyright and
# related or neighboring rights to the extent permitted by
# law as described by the CC0 1.0 Universal Public Domain
# Dedication. You should have received a copy of the full
# dedication along with this file, typically as a file
# named <CC0-1.0.txt>. If not, it may be available at
# <https://creativecommons.org/publicdomain/zero/1.0/>.
#
